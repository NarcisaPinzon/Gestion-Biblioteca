<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>
    <h:head>
        <meta charset="UTF-8"/>
        <title>Búsqueda de Libros</title>
        <link rel="stylesheet" type="text/css" href="css/busqueda.css"/>
    </h:head>
    <h:body>
        <h:form>

            <div class="titulo">BÚSQUEDA DE LIBROS</div>

            <!-- Campo de búsqueda -->
            <div class="contenedor">
                <div class="campo-busqueda">
                    <label for="buscar">Buscar</label>
                    <h:inputText id="buscar" value="#{busquedaBean.termino}" />
                </div>

                <h:commandButton value="REALIZA TU BÚSQUEDA"
                                 action="#{busquedaBean.buscar}"
                                 styleClass="btn-buscar" />
            </div>

            <h:messages globalOnly="true" style="color:red; margin-top:10px;" />

            <!-- Resultados -->
            <h:panelGroup rendered="#{busquedaBean.mostrarResultados}">
                <h:dataTable value="#{busquedaBean.resultados}" var="libro" styleClass="tabla-resultados">
                    <h:column>
                        <f:facet name="header">Seleccionar</f:facet>
                        <h:selectBooleanCheckbox value="#{busquedaBean.librosSeleccionados[libro.id]}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">Título</f:facet>
                        #{libro.titulo}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Autor</f:facet>
                        #{libro.autor}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Año</f:facet>
                        #{libro.anioPublicacion}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Editorial</f:facet>
                        #{libro.editorial}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Disponible</f:facet>
                        <h:outputText value="#{libro.disponible ? 'Sí' : 'No'}" />
                    </h:column>
                </h:dataTable>

                <h:commandButton value="Reservar"
                                 action="#{busquedaBean.irAReserva}"
                                 styleClass="btn-buscar"
                                 style="margin-top: 10px;" />
            </h:panelGroup>
        </h:form>
    </h:body>
</f:view>
</html>
